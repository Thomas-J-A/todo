(()=>{let e={default:[{title:"Rubbish",description:"Empty bins",dueDate:"2021-04-03",priority:"high",isComplete:!1,showDescription:!1},{title:"Jogging",description:"3k run around the block",dueDate:"2021-04-09",priority:"low",isComplete:!1,showDescription:!1}]};const t={sidebarHome:document.getElementById("sidebar_home"),sidebarChevron:document.getElementById("sidebar_chevron"),projectList:document.getElementById("sidebar_project-list"),mainDisplay:document.querySelector(".main"),addProjectBtn:document.getElementById("sidebar_add-project"),modalAddProject:document.getElementById("modal_add-project"),modalAddTask:document.getElementById("modal_add-task"),modalAddProjectClose:document.getElementById("modal_add-project-close"),modalAddTaskClose:document.getElementById("modal_add-task-close"),modalAddTaskProjectSelect:document.getElementById("modal_add-task-project-select"),projectForm:document.getElementById("form-project"),taskForm:document.getElementById("form-task")},n=(()=>{function s(){a.clearElement(t.mainDisplay);const e=document.createElement("div"),n=document.createElement("h1"),s=document.createElement("p"),d=document.createElement("img");e.classList.add("hero"),n.textContent="TODO",s.textContent="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum placerat lacus et ex ornare sodales. Quisque non eros quis purus malesuada ornare. Donec lobortis rutrum dignissim. Morbi placerat sollicitudin mauris a posuere. Nullam placerat fringilla justo, vel consequat nisi scelerisque ac. Maecenas et cursus nisl.",d.classList.add("hero-image"),d.src="./images/hero-img.svg",e.appendChild(n),e.appendChild(s),e.appendChild(d),t.mainDisplay.appendChild(e)}function d(){const n=Object.keys(e);if(n.length>0)for(let e=0;e<n.length;e++){const a=document.createElement("li"),s=document.createElement("span"),d=document.createElement("i");s.classList.add("sidebar_project-list-name"),s.textContent=n[e],s.addEventListener("click",o),d.classList.add("fas"),d.classList.add("fa-times"),d.addEventListener("click",i),a.appendChild(s),a.appendChild(d),t.projectList.appendChild(a)}else{const e=document.createElement("li");e.textContent="No Projects To Display",t.projectList.appendChild(e)}}function o(e){a.clearElement(t.mainDisplay);const s=document.createElement("h1"),d=document.createElement("div"),o=document.createElement("i"),i=document.createElement("span");s.setAttribute("id","main_title"),s.textContent=e.target.textContent,d.setAttribute("id","main_add-task"),d.addEventListener("click",n.displayModal),o.classList.add("fas"),o.classList.add("fa-plus"),i.textContent="Add Task",d.appendChild(o),d.appendChild(i),t.mainDisplay.appendChild(s),t.mainDisplay.appendChild(d),l()}function i(n){const o=n.target.previousSibling.textContent,i=document.getElementById("main_title"),c=document.getElementById("main_task-list");null!==i&&o===i.textContent&&(c?a.removeElement(c):a.removeElement(document.getElementById("msg-no-tasks")),n.target.parentNode.nextSibling?(i.textContent=n.target.parentNode.nextSibling.textContent,l()):n.target.parentNode.previousSibling?(i.textContent=n.target.parentNode.previousSibling.textContent,l()):s()),delete e[o],a.clearElement(t.projectList),d(),a.updateLocalStorage()}function l(){const n=document.getElementById("main_title").textContent,a=e[n];if(a.length>0){const e=document.createElement("ul");e.setAttribute("id","main_task-list");for(let t=0;t<a.length;t++){const n=document.createElement("li"),s=document.createElement("div"),d=document.createElement("div"),o=document.createElement("span"),i=document.createElement("span"),l=document.createElement("i"),p=document.createElement("i"),u=document.createElement("p");n.setAttribute("data-index",t),"low"===a[t].priority?s.classList.add("priority-low"):"medium"===a[t].priority?s.classList.add("priority-medium"):s.classList.add("priority-high"),d.classList.add("task-checkbox"),a[t].isComplete?d.classList.add("checked"):d.classList.add("unchecked"),d.addEventListener("click",c),o.classList.add("task-title"),o.textContent=a[t].title,i.classList.add("task-due-date"),i.textContent=a[t].dueDate,l.classList.add("task-remove"),l.classList.add("fas"),l.classList.add("fa-trash-alt"),l.addEventListener("click",m),!0===a[t].showDescription&&p.classList.add("open"),p.classList.add("fas"),p.classList.add("fa-chevron-down"),p.addEventListener("click",r),!0===a[t].showDescription&&u.classList.add("show"),u.classList.add("description"),u.textContent=a[t].description,s.appendChild(d),s.appendChild(o),s.appendChild(i),s.appendChild(l),s.appendChild(p),n.appendChild(s),n.appendChild(u),e.appendChild(n)}t.mainDisplay.appendChild(e)}else{const e=document.createElement("p");e.setAttribute("id","msg-no-tasks"),e.textContent="No Tasks To Display",t.mainDisplay.appendChild(e)}}function c(t){const n=document.getElementById("main_title").textContent,s=t.target.parentNode.parentNode.dataset.index,d=t.target;d.classList.contains("unchecked")?(d.classList.remove("unchecked"),d.classList.add("checked"),e[n][s].isComplete=!0):(d.classList.remove("checked"),d.classList.add("unchecked"),e[n][s].isComplete=!1),a.updateLocalStorage()}function r(t){const n=document.getElementById("main_title").textContent,s=t.target.parentNode.parentNode.dataset.index;t.target.classList.contains("open")?(t.target.classList.remove("open"),t.target.parentNode.nextSibling.classList.remove("show"),e[n][s].showDescription=!1):(t.target.classList.add("open"),t.target.parentNode.nextSibling.classList.add("show"),e[n][s].showDescription=!0),a.updateLocalStorage()}function m(t){const n=document.getElementById("main_title").textContent,s=t.target.parentNode.parentNode.dataset.index;e[n].splice(s,1),a.removeElement(document.getElementById("main_task-list")),l(),a.updateLocalStorage()}return{renderHome:s,toggleProjectList:function(){const e=t.sidebarChevron.classList;e.contains("open")?(e.remove("open"),a.clearElement(t.projectList)):(e.add("open"),d())},displayModal:function(n){if("sidebar_add-project"===n.currentTarget.id)t.modalAddProject.classList.add("show");else{const n=t.modalAddTaskProjectSelect,s=Object.keys(e);a.clearElement(n);for(let e=0;e<s.length;e++){const t=document.createElement("option");t.value=s[e],t.textContent=s[e],n.appendChild(t)}t.modalAddTask.classList.add("show")}},updateProjectList:function(n){n.preventDefault();const s=n.target.elements[0].value;e[s]=[],t.sidebarChevron.classList.contains("open")&&(a.clearElement(t.projectList),d()),a.resetForm(t.projectForm),t.modalAddProject.classList.remove("show"),a.updateLocalStorage()},updateTaskList:function(n){n.preventDefault();const s=n.target.elements[0].value,d=n.target.elements[1].value,o=n.target.elements[2].value,i=n.target.elements[4].value,c=n.target.elements[3].value;if(e[c].push(function(e,t,n,a,s,d){return{title:e,description:t,dueDate:n,priority:a,isComplete:!1,showDescription:!1}}(s,d,o,i)),c===document.getElementById("main_title").textContent){const e=document.getElementById("main_task-list");if(e)a.removeElement(e);else{const e=document.getElementById("msg-no-tasks");a.removeElement(e)}l()}a.resetForm(t.taskForm),t.modalAddTask.classList.remove("show"),a.updateLocalStorage()},closeModal:function(e){e.target.classList.contains("modal")?("modal_add-project"===e.target.id?a.resetForm(t.projectForm):a.resetForm(t.taskForm),e.target.classList.remove("show")):"modal_add-project-close"==e.target.id?(a.resetForm(t.projectForm),t.modalAddProject.classList.remove("show")):"modal_add-task-close"==e.target.id&&(a.resetForm(t.taskForm),t.modalAddTask.classList.remove("show"))}}})(),a=(t.sidebarHome.addEventListener("click",n.renderHome),t.sidebarChevron.addEventListener("click",n.toggleProjectList),t.addProjectBtn.addEventListener("click",n.displayModal),t.modalAddProjectClose.addEventListener("click",n.closeModal),t.modalAddTaskClose.addEventListener("click",n.closeModal),window.addEventListener("click",n.closeModal),t.projectForm.addEventListener("submit",n.updateProjectList),t.taskForm.addEventListener("submit",n.updateTaskList),{clearElement:function(e){e.textContent=""},removeElement:function(e){e.remove()},resetForm:function(e){e.reset()},updateLocalStorage:function(){localStorage.setItem("projects",JSON.stringify(e))},init:function(){const t=localStorage.getItem("projects");t&&(e=JSON.parse(t)),n.renderHome()}});a.init()})();