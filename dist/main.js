(()=>{let e={default:[{title:"Rubbish",description:"Empty bins",dueDate:"2021-04-03",priority:"high",isComplete:!1,showDescription:!1},{title:"Jogging",description:"3k run around the block",dueDate:"2021-04-09",priority:"low",isComplete:!1,showDescription:!1}]};const t={sidebarHome:document.getElementById("sidebar_home"),sidebarChevron:document.getElementById("sidebar_chevron"),projectList:document.getElementById("sidebar_project-list"),mainDisplay:document.querySelector(".main"),addProjectBtn:document.getElementById("sidebar_add-project"),modalAddProject:document.getElementById("modal_add-project"),modalAddTask:document.getElementById("modal_add-task"),modalAddProjectClose:document.getElementById("modal_add-project-close"),modalAddTaskClose:document.getElementById("modal_add-task-close"),modalAddTaskProjectSelect:document.getElementById("modal_add-task-project-select"),projectForm:document.getElementById("form-project"),taskForm:document.getElementById("form-task")},n=(()=>{function d(){a.clearElement(t.mainDisplay);const e=document.createElement("div"),n=document.createElement("h1"),d=document.createElement("p");n.textContent="TODO",d.textContent="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum placerat lacus et ex ornare sodales. Quisque non eros quis purus malesuada ornare. Donec lobortis rutrum dignissim. Morbi placerat sollicitudin mauris a posuere. Nullam placerat fringilla justo, vel consequat nisi scelerisque ac. Maecenas et cursus nisl.",e.appendChild(n),e.appendChild(d),t.mainDisplay.appendChild(e)}function o(){const n=Object.keys(e);if(n.length>0)for(let e=0;e<n.length;e++){const a=document.createElement("li"),d=document.createElement("span"),o=document.createElement("i");d.classList.add("sidebar_project-list-name"),d.textContent=n[e],d.addEventListener("click",s),o.classList.add("fas"),o.classList.add("fa-times"),o.addEventListener("click",i),a.appendChild(d),a.appendChild(o),t.projectList.appendChild(a)}else{const e=document.createElement("li");e.textContent="No Projects To Display",t.projectList.appendChild(e)}}function s(e){a.clearElement(t.mainDisplay);const d=document.createElement("div"),o=document.createElement("span"),s=document.createElement("div"),i=document.createElement("i"),c=document.createElement("span");d.setAttribute("id","main_title-wrapper"),o.setAttribute("id","main_title"),o.textContent=e.target.textContent,s.setAttribute("id","main_add-task"),s.addEventListener("click",n.displayModal),i.classList.add("fas"),i.classList.add("fa-plus"),c.textContent="Add Task",s.appendChild(i),s.appendChild(c),d.appendChild(o),d.appendChild(s),t.mainDisplay.appendChild(d),l()}function i(n){const s=n.target.previousSibling.textContent,i=document.getElementById("main_title"),c=document.getElementById("main_task-list");null!==i&&s===i.textContent&&(c?a.removeElement(c):a.removeElement(document.getElementById("msg-no-tasks")),n.target.parentNode.nextSibling?(i.textContent=n.target.parentNode.nextSibling.textContent,l()):n.target.parentNode.previousSibling?(i.textContent=n.target.parentNode.previousSibling.textContent,l()):d()),delete e[s],a.clearElement(t.projectList),o(),a.updateLocalStorage()}function l(){const n=document.getElementById("main_title").textContent,a=e[n];if(a.length>0){const e=document.createElement("ul");e.setAttribute("id","main_task-list");for(let t=0;t<a.length;t++){const n=document.createElement("li"),d=document.createElement("div"),o=document.createElement("div"),s=document.createElement("span"),i=document.createElement("span"),l=document.createElement("i"),m=document.createElement("i"),p=document.createElement("p");n.setAttribute("data-index",t),"low"===a[t].priority?d.classList.add("priority-low"):"medium"===a[t].priority?d.classList.add("priority-medium"):d.classList.add("priority-high"),a[t].isComplete?o.classList.add("checked"):o.classList.add("unchecked"),s.textContent=a[t].title,i.textContent=a[t].dueDate,l.classList.add("fas"),l.classList.add("fa-trash-alt"),l.addEventListener("click",r),!0===a[t].showDescription&&m.classList.add("open"),m.classList.add("fas"),m.classList.add("fa-chevron-down"),m.addEventListener("click",c),!0===a[t].showDescription&&p.classList.add("show"),p.classList.add("description"),p.textContent=a[t].description,d.appendChild(o),d.appendChild(s),d.appendChild(i),d.appendChild(l),d.appendChild(m),n.appendChild(d),n.appendChild(p),e.appendChild(n)}t.mainDisplay.appendChild(e)}else{const e=document.createElement("p");e.setAttribute("id","msg-no-tasks"),e.textContent="No Tasks To Display",t.mainDisplay.appendChild(e)}}function c(t){const n=document.getElementById("main_title").textContent,a=t.target.parentNode.parentNode.dataset.index;t.target.classList.contains("open")?(t.target.classList.remove("open"),t.target.parentNode.nextSibling.classList.remove("show"),e[n][a].showDescription=!1):(t.target.classList.add("open"),t.target.parentNode.nextSibling.classList.add("show"),e[n][a].showDescription=!0)}function r(t){const n=document.getElementById("main_title").textContent,d=t.target.parentNode.parentNode.dataset.index;e[n].splice(d,1),a.removeElement(document.getElementById("main_task-list")),l(),a.updateLocalStorage()}return{renderHome:d,toggleProjectList:function(){const e=t.sidebarChevron.classList;e.contains("open")?(e.remove("open"),a.clearElement(t.projectList)):(e.add("open"),o())},displayModal:function(n){if("sidebar_add-project"===n.currentTarget.id)t.modalAddProject.classList.add("show");else{const n=t.modalAddTaskProjectSelect,d=Object.keys(e);a.clearElement(n);for(let e=0;e<d.length;e++){const t=document.createElement("option");t.value=d[e],t.textContent=d[e],n.appendChild(t)}t.modalAddTask.classList.add("show")}},updateProjectList:function(n){n.preventDefault();const d=n.target.elements[0].value;e[d]=[],t.sidebarChevron.classList.contains("open")&&(a.clearElement(t.projectList),o()),t.modalAddProject.classList.remove("show"),a.updateLocalStorage()},updateTaskList:function(n){n.preventDefault();const d=n.target.elements[0].value,o=n.target.elements[1].value,s=n.target.elements[2].value,i=n.target.elements[4].value,c=n.target.elements[3].value;if(e[c].push(function(e,t,n,a,d,o){return{title:e,description:t,dueDate:n,priority:a,isComplete:!1,showDescription:!1}}(d,o,s,i)),c===document.getElementById("main_title").textContent){const e=document.getElementById("main_task-list");if(e)a.removeElement(e);else{const e=document.getElementById("msg-no-tasks");a.removeElement(e)}l()}t.modalAddTask.classList.remove("show"),a.updateLocalStorage()},closeModal:function(e){e.target.classList.contains("modal")?e.target.classList.remove("show"):"modal_add-project-close"==e.target.id?t.modalAddProject.classList.remove("show"):"modal_add-task-close"==e.target.id&&t.modalAddTask.classList.remove("show")}}})(),a=(t.sidebarHome.addEventListener("click",n.renderHome),t.sidebarChevron.addEventListener("click",n.toggleProjectList),t.addProjectBtn.addEventListener("click",n.displayModal),t.modalAddProjectClose.addEventListener("click",n.closeModal),t.modalAddTaskClose.addEventListener("click",n.closeModal),window.addEventListener("click",n.closeModal),t.projectForm.addEventListener("submit",n.updateProjectList),t.taskForm.addEventListener("submit",n.updateTaskList),{clearElement:function(e){e.textContent=""},removeElement:function(e){e.remove()},updateLocalStorage:function(){localStorage.setItem("projects",JSON.stringify(e))},init:function(){const t=localStorage.getItem("projects");t&&(e=JSON.parse(t)),n.renderHome()}});a.init()})();